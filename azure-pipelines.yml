trigger: none

pool:
  name: poolgame

stages:
# =========================
# Stage 1: Code Quality
# =========================
- stage: CodeQuality
  displayName: "Code Quality & Linting"
  jobs:
  - job: Linting
    displayName: "Run Linters"
    steps:

    # Markdown Lint
    - task: PowerShell@2
      displayName: "Markdown Lint"
      continueOnError: true
      inputs:
        targetType: inline
        script: |
          npm install -g markdownlint-cli
          markdownlint "$(System.DefaultWorkingDirectory)"

    # Stylelint (CSS)
    - task: PowerShell@2
      displayName: "Stylelint CSS"
      continueOnError: true
      inputs:
        targetType: inline
        script: |
          npm install -D stylelint stylelint-config-standard
          npx stylelint "**/*.css"

    # Biome Lint
    - task: PowerShell@2
      displayName: "Biome Lint"
      continueOnError: true
      inputs:
        targetType: inline
        script: |
          $biome = "$(Agent.ToolsDirectory)\biome-win32-x64.exe"
          $src   = "$(System.DefaultWorkingDirectory)\src"

          & $biome --version
          & $biome lint $src


# =========================
# Stage 2: Build
# =========================
# - stage: Build
#   displayName: "Build Application"
#   dependsOn: CodeQuality
#   condition: succeededOrFailed()   # ðŸ‘ˆ Lint fail hua to build nahi chalega
#   jobs:
#   - job: BuildJob
#     displayName: "Node Build"
#     steps:

#     - task: NodeTool@0
#       displayName: "Use Node.js 16"
#       inputs:
#         versionSource: spec
#         versionSpec: '16.x'

#     - task: PowerShell@2
#       displayName: "npm install"
#       inputs:
#         targetType: inline
#         script: |
#           npm install

#     - task: PowerShell@2
#       displayName: "npm build"
#       inputs:
#         targetType: inline
#         script: |
#           npm run build

